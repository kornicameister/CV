---
name: release

'on':
  push:
    branches-ignore: '*'
    tags: /^\d+\.\d+\.\d+$/
  pull_request:
    branches-ignore: '*'
    tags-ignore: '*'

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v1

      - name: setup-docker
        uses: docker-practice/actions-setup-docker@0.0.1

      - name: make cv.pdf
        run: make cv.pdf
      - name: make cv.json
        run: make cv.json

      - name: Release
        uses: fnkr/github-action-ghr@v1
        env:
          GHR_PATH: build/
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
